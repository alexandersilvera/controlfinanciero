{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Header = _resolveComponent(\"Header\");\n\n  const _component_Graphic = _resolveComponent(\"Graphic\");\n\n  const _component_Action = _resolveComponent(\"Action\");\n\n  const _component_Resume = _resolveComponent(\"Resume\");\n\n  const _component_Movements = _resolveComponent(\"Movements\");\n\n  const _component_Layout = _resolveComponent(\"Layout\");\n\n  return _openBlock(), _createBlock(_component_Layout, null, {\n    header: _withCtx(() => [_createVNode(_component_Header)]),\n    resume: _withCtx(() => [_createVNode(_component_Resume, {\n      \"total-label\": 'Ahorro total',\n      label: $data.label,\n      \"total-amount\": $options.totalAmount,\n      amount: $data.amount\n    }, {\n      graphic: _withCtx(() => [_createVNode(_component_Graphic, {\n        amounts: $options.amounts,\n        onSelect: _ctx.select\n      }, null, 8\n      /* PROPS */\n      , [\"amounts\", \"onSelect\"])]),\n      action: _withCtx(() => [_createVNode(_component_Action, {\n        onCreate: $options.create\n      }, null, 8\n      /* PROPS */\n      , [\"onCreate\"])]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"label\", \"total-amount\", \"amount\"])]),\n    movements: _withCtx(() => [_createVNode(_component_Movements, {\n      movements: $data.movements,\n      onRemove: $options.remove\n    }, null, 8\n    /* PROPS */\n    , [\"movements\", \"onRemove\"])]),\n    _: 1\n    /* STABLE */\n\n  });\n}","map":{"version":3,"mappings":";;;;;;;;;;;;;;uBACEA,aAyBSC,iBAzBT,EAyBS,IAzBT,EAyBS;IAxBIC,MAAM,WACf,MAAiB,CAAjBC,aAAiBC,iBAAjB,CAAiB,CADF,CAwBV;IArBIC,MAAM,WACf,MAYS,CAZTF,aAYSG,iBAZT,EAYS;MAXN,eAAa,cAWP;MAVNC,KAAK,EAAEC,WAUD;MATN,gBAAcC,oBASR;MARNC,MAAM,EAAEF;IAQF,CAZT;MAMaG,OAAO,WAChB,MAA8C,CAA9CR,aAA8CS,kBAA9C,EAA8C;QAApCC,OAAO,EAAEJ,gBAA2B;QAAjBK,QAAM,EAAEC;MAAS,CAA9C;;MAAA,0BAA8C,CAD9B;MAGPC,MAAM,WACf,MAA2B,CAA3Bb,aAA2Bc,iBAA3B,EAA2B;QAAlBC,QAAM,EAAET;MAAU,CAA3B,EAAuB,IAAvB,EAAuB;MAAA;MAAvB,EAAuB,YAAvB,CAA2B,CADZ;;;;KATnB;;IAAA,sCAYS,CAbM,CAqBV;IANIU,SAAS,WAClB,MAGE,CAHFhB,aAGEiB,oBAHF,EAGE;MAFCD,SAAS,EAAEX,eAEZ;MADCa,QAAM,EAAEZ;IACT,CAHF;;IAAA,4BAGE,CAJgB,CAMb;;;;EAAA,CAzBT","names":["_createBlock","_component_Layout","header","_createVNode","_component_Header","resume","_component_Resume","label","$data","$options","amount","graphic","_component_Graphic","amounts","onSelect","_ctx","action","_component_Action","onCreate","movements","_component_Movements","onRemove"],"sourceRoot":"","sources":["/home/alexander/Desktop/ProyectosWeb/vue/ControlFinancieroPersonal/controlfinanciero/src/components/Home.vue"],"sourcesContent":["<template>\n  <Layout>\n    <template #header>\n      <Header></Header>\n    </template>\n    <template #resume>\n      <Resume\n        :total-label=\"'Ahorro total'\"\n        :label=\"label\"\n        :total-amount=\"totalAmount\"\n        :amount=\"amount\"\n      >\n        <template #graphic>\n          <Graphic :amounts=\"amounts\" @select=\"select\"/>\n        </template>\n        <template #action>\n          <Action @create=\"create\" />\n        </template>\n      </Resume>\n    </template>\n    <template #movements>\n      <Movements \n        :movements=\"movements\" \n        @remove=\"remove\"  \n      />\n    </template>\n  </Layout>\n</template>\n\n<script>\nimport Layout from \"./Layout.vue\";\nimport Header from \"./Header.vue\";\nimport Resume from \"./Resume/Index.vue\";\nimport Action from \"./Action.vue\";\nimport Movements from \"./Movements/Index.vue\";\nimport Graphic from \"./Resume/Graphic.vue\";\nexport default {\n  components: {\n    Layout,\n    Header,\n    Resume,\n    Action,\n    Movements,\n    Graphic,\n},\n  data() {\n    return {\n      label: null,\n      amount: null,\n      movements: [],\n    };\n  },\n  computed: {\n    amounts() {\n      const lastDays = this.movements\n        .filter(m => {\n          const today = new Date();\n          const oldDate = today.setDate(today.getDate() - 30);\n          return m.time > oldDate;\n        })\n        .map(m => m.amount);\n      \n      return lastDays.map((m, i) => {\n        const lastMovements = lastDays.slice(0, i + 1);\n        return lastMovements.reduce((suma, movement) => {\n          return suma + movement\n        }, 0);\n      });\n    },\n    totalAmount() {\n      return this.movements.reduce((suma, m) => {\n        return suma + m.amount;\n      }, 0);\n    }\n  },\n  mounted() {\n    const movements = JSON.parse(localStorage.getItem(\"movements\"));\n\n    if (Array.isArray(movements)) {\n      this.movements = movements.map(m => {\n        return { ...m, time: new Date(m.time) };\n      });\n    }\n  },\n  methods: {\n    create(movement) {\n      this.movements.push(movement);\n      this.save()\n    },\n    remove(id) {\n      const index = this.movements.findIndex(m => m.id === id);\n      this.movements.splice(index, 1);\n      this.save()\n    },\n    save() {\n      localStorage.setItem(\"movements\", JSON.stringify(this.movements));\n    }\n  },\n  select(el) {\n    console.log(el);\n    this.amount = el;\n  }\n};\n</script>"]},"metadata":{},"sourceType":"module"}